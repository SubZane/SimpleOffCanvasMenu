/*! flypanels - v3.0.0 - 2018-10-11
* https://www.andreasnorman.com/flyPanels/
* Copyright (c) 2018 ; Licensed  */

!function(e,t){"function"==typeof define&&define.amd?define([],t(e)):"object"==typeof exports?module.exports=t(e):e.fpm_treemenu=t(e)}("undefined"!=typeof global?global:this.window||this.global,function(e){"use strict";var i,l,u={},c=!!document.querySelector&&!!e.addEventListener,d={expandHandler:"a.expand",onInit:function(){},onDestroy:function(){},OnExpandOpen:function(){},OnExpandClose:function(){}},s=function(e,t){return!(void 0===e.classList||!e.classList.contains(t))},f=function(e,t){t?e.setAttribute("aria-label",e.getAttribute("data-aria-label-active")):e.setAttribute("aria-label",e.getAttribute("data-aria-label"))},p=function(e){void 0!==i[e]&&i[e].call(l)},y=function(e,t,n){if("[object Object]"===Object.prototype.toString.call(e))for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(n,e[a],a,e);else for(var r=0,o=e.length;r<o;r++)t.call(n,e[r],r,e)};return u.destroy=function(){i&&(document.documentElement.classList.remove(i.initClass),document.removeEventListener("click",eventHandler,!1),i=null,p("onDestroy"))},u.init=function(e){if(c){var n,a,r;u.destroy(),a=e||{},r={},y(n=d,function(e,t){r[t]=n[t]}),y(a,function(e,t){r[t]=a[t]}),i=r,l=document.querySelector(i.container),(-1<navigator.userAgent.toLowerCase().indexOf("android")||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i))&&document.querySelector(".flypanels-treemenu").classList.add("touch");var t,o=document.querySelectorAll(".flypanels-treemenu li.haschildren "+i.expandHandler);y(o,function(e,t){e.addEventListener("click",function(e){var t;"false"===(t=this.parentElement.parentElement).getAttribute("aria-expanded")?(t.setAttribute("aria-expanded","true"),f(t.querySelector("a.expand"),!0),t.querySelector("ul").setAttribute("aria-hidden","false"),t.querySelector("ul").removeAttribute("hidden"),setTimeout(function(){t.classList.toggle("expanded")},i.transitiontime),p("OnExpandOpen")):(t.setAttribute("aria-expanded","false"),f(t.querySelector("a.expand"),!1),t.querySelector("ul").setAttribute("aria-hidden","true"),t.querySelector("ul").setAttribute("hidden",""),setTimeout(function(){t.classList.toggle("expanded")},i.transitiontime),p("OnExpandClose")),e.preventDefault()})}),t=document.querySelectorAll(".flypanels-treemenu a, .flypanels-button-left"),document.addEventListener("keydown",function(e){s(document.querySelector("body"),"flypanels-open")&&s(document.querySelector(".flypanels-container"),"openleft")&&9===e.keyCode&&(e.shiftKey?0===Array.prototype.indexOf.call(t,e.target)&&(t[t.length-1].focus(),e.preventDefault()):-1===Array.prototype.indexOf.call(t,e.target)&&(t[0].focus(),e.preventDefault()))}),p("onInit")}},u});