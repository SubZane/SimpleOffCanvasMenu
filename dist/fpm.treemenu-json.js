/*! flypanels - v3.1.1 - 2019-03-06
* https://www.andreasnorman.com/flyPanels/
* Copyright (c) 2019 ; Licensed  */

!function(e,t){"function"==typeof define&&define.amd?define([],t(e)):"object"==typeof exports?module.exports=t(e):e.fpm_treemenu=t(e)}("undefined"!=typeof global?global:this.window||this.global,function(e){"use strict";var a,t,i,o={},u=!!document.querySelector&&!!e.addEventListener,c="",n={lihaschildren:'<li class="haschildren" role="treeitem" aria-expanded="false"><div><a href="{url}" class="link">{title}</a><a aria-label="Expand submenu" href="#" data-aria-label="Expand submenu" data-aria-label-active="Collapse submenu" class="expand">{count}<i class="fa icon" aria-hidden="true"></i></a></div>',linochildren:'<li class="nochildren"><div><a href="{url}" class="link">{title}</a></div></li>'},d={expandHandler:"a.expand",onInit:function(){},onDestroy:function(){},OnExpandOpen:function(){},OnExpandClose:function(){}},s=function(e,t){return!(void 0===e.classList||!e.classList.contains(t))},f=function(e,t){t?e.setAttribute("aria-label",e.getAttribute("data-aria-label-active")):e.setAttribute("aria-label",e.getAttribute("data-aria-label"))},p=function(t){var e=document.querySelector(".flypanels-treemenu").getAttribute("data-json"),n=new XMLHttpRequest;n.open("GET",e,!0),n.onload=function(){if(200<=n.status&&n.status<400){var e=function(e){try{var t=JSON.parse(e);if(t&&"object"==typeof t&&null!==t)return t}catch(e){}return console.warn("Error parsing JSON file"),!1}(n.response);!1!==e&&0<e.treemenu.length?(i=e.treemenu,t()):i=null}else i=null},n.onerror=function(){console.log("error: "+n)},n.send()},m=function(e){0<e.length&&(c+='<ul role="group" aria-hidden="true" hidden>',e.forEach(function(e){if(e.hasOwnProperty("Children")){var t={"{title}":e.Title,"{url}":e.Url,"{count}":e.Children.length};c+=n.lihaschildren.replace(/{title}|{url}|{count}/gi,function(e){return t[e]}),m(e.Children),c+="</li>"}else{t={"{title}":e.Title,"{url}":e.Url};c+=n.linochildren.replace(/{title}|{url}/gi,function(e){return t[e]})}}),c+="</ul>")},y=function(e){void 0!==a[e]&&a[e].call(t)},h=function(e,t,n){if("[object Object]"===Object.prototype.toString.call(e))for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(n,e[r],r,e);else for(var l=0,a=e.length;l<a;l++)t.call(n,e[l],l,e)};return o.destroy=function(){a&&(document.documentElement.classList.remove(a.initClass),document.removeEventListener("click",eventHandler,!1),a=null,y("onDestroy"))},o.init=function(e){var n,r,l;u&&(o.destroy(),r=e||{},l={},h(n=d,function(e,t){l[t]=n[t]}),h(r,function(e,t){l[t]=r[t]}),a=l,t=document.querySelector(a.container),p(function(e){m(i);var t=document.querySelector(".flypanels-treemenu"),n=document.createElement("div");n.innerHTML=c,t.appendChild(n.firstChild),document.querySelector(".flypanels-treemenu ul").removeAttribute("hidden"),document.querySelector(".flypanels-treemenu ul").removeAttribute("aria-hidden"),document.querySelector(".flypanels-treemenu ul").setAttribute("role","tree"),(-1<navigator.userAgent.toLowerCase().indexOf("android")||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i))&&document.querySelector(".flypanels-treemenu").classList.add("touch");var r,l=document.querySelectorAll(".flypanels-treemenu li.haschildren "+a.expandHandler);h(l,function(e,t){e.addEventListener("click",function(e){var t;"false"===(t=this.parentElement.parentElement).getAttribute("aria-expanded")?(t.setAttribute("aria-expanded","true"),f(t.querySelector("a.expand"),!0),t.querySelector("ul").setAttribute("aria-hidden","false"),t.querySelector("ul").removeAttribute("hidden"),setTimeout(function(){t.classList.toggle("expanded")},a.transitiontime),y("OnExpandOpen")):(t.setAttribute("aria-expanded","false"),f(t.querySelector("a.expand"),!1),t.querySelector("ul").setAttribute("aria-hidden","true"),t.querySelector("ul").setAttribute("hidden",""),setTimeout(function(){t.classList.toggle("expanded")},a.transitiontime),y("OnExpandClose")),e.preventDefault()})}),r=document.querySelectorAll(".flypanels-treemenu a, .flypanels-button-left"),document.addEventListener("keydown",function(e){s(document.querySelector("body"),"flypanels-open")&&s(document.querySelector(".flypanels-container"),"openleft")&&9===e.keyCode&&(e.shiftKey?0===Array.prototype.indexOf.call(r,e.target)&&(r[r.length-1].focus(),e.preventDefault()):-1===Array.prototype.indexOf.call(r,e.target)&&(r[0].focus(),e.preventDefault()))})}),y("onInit"))},o});